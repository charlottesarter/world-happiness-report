---
title: "Test pour le projet d'IF36 par Charlotte"
author: "Charlotte Sarter"
date: '2022-03-22'
output:
  rmarkdown::html_document:
    theme: cosmo
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Est-ce que certaines régions du monde sont moins heureuses que d'autres ?

C'est ce que nous allons nous demander dans cette partie. Notre but est de déterminer si le bonheur a des préférences géographiques, et quels sont les critères qui rendent les populations de régions spécifiques plus heureuses que les autres.

Dans un premier temps, il faut organiser et nettoyer les jeux de données avec lesquels nous allons travailler.

## Idées de graphes à faire 

Chargement & traitement des données :

Convention de nommage des colonnes : tout en minuscule, les espaces sont remplacés par "_".

1. Un barchart qui indique le nombre de pays dont on a les données par région
2. Un boxplot qui indique le score de bonheur de chaque région
3. Une carte du monde colorée par région en fonction du score de bonheur (avec ggmap ou leaflet)
4. Faire des scatterplots pour les différents critères en fonction du niveau de bonheur par région (moyenne sur toutes les années ou évolution dans le temps ?)
5. 



```{r clean}
library(ggplot2)
library(dplyr)

# Mettre toutes les données dans le même dataset

# 1 - Importer les données 

X2015 <- read_csv('../data/2015.csv')
X2016 <- read_csv('../data/2016.csv')
X2017 <- read_csv('../data/2017.csv')
X2018 <- read_csv('../data/2018.csv')
X2019 <- read_csv('../data/2019.csv')
X2020 <- read_csv('../data/2020.csv')
X2021 <- read_csv('../data/2021.csv')

# 2 - Nettoyage des datasets

# Nettoyage du set 2015

# Renommage des colonnes

colnames(X2015)

colnames(X2015) <- c("country", "region", "happiness_rank", "happiness_score", "standard_error", "economy", "family", "health", "freedom", "trust", "generosity", "dystopia_residual")

# Ajout de la colonne "year"

X2015 <- cbind(X2015, "year"=2015)

# Nettoyage du set 2016

# Renommage des colonnes 

colnames(X2016)

colnames(X2016) <- c("country", "region", "happiness_rank", "happiness_score", "lower_confidence_interval", "upper_confidence_interval", "economy", "family", "health", "freedom", "trust", "generosity", "dystopia_residual")

# Ajout de la colonne "year"

X2016 <- cbind(X2016, "year"=2016)

# Nettoyage du set 2017

# Renommage des colonnes 

colnames(X2017)

colnames(X2017) <- c("country", "happiness_rank", "happiness_score", "whisker_high", "whisker_low", "economy", "family", "health", "freedom", "generosity", "trust", "dystopia_residual")

# Ajout de la colonne "year"

X2017 <- cbind(X2017, "year"=2017)

# Nettoyage du set 2018

# Renommage des colonnes 

colnames(X2018)

View(X2018)

colnames(X2018) <- c("happiness_rank", "country", "happiness_score", "economy", "family", "health", "freedom", "generosity", "trust")

# Ajout de la colonne "year"

X2018 <- cbind(X2018, "year"=2018)

# Nettoyage du set 2019

# Renommage des colonnes 

colnames(X2019)

colnames(X2019) <- c("happiness_rank", "country", "happiness_score", "economy", "family", "health", "freedom", "generosity", "trust")

# Ajout de la colonne "year"

X2019 <- cbind(X2019, "year"=2019)

# Nettoyage du set 2020

# Renommage des colonnes & tri des colonnes

colnames(X2020)

View(X2020)

X2020 <- X2020[,-c(13:19)]

colnames(X2020) <- c("country", "region", "happiness_score", "standard_error", "whisker_high", "whisker_low", "economy", "family", "health", "freedom", "generosity", "trust", "dystopia_residual")

# Ajout de la colonne "year"

X2020 <- cbind(X2020, "year"=2020)

# Nettoyage du set 2021

# Renommage des colonnes & tri des colonnes

colnames(X2021)

X2021 <- X2021[,-c(13:19)]

colnames(X2021) <- c("country", "region", "happiness_score", "standard_error", "whisker_high", "whisker_low", "economy", "family", "health", "freedom", "generosity", "trust", "dystopia_residual")

# Ajout de la colonne "year"

X2021 <- cbind(X2021, "year"=2021)

# 3 - Assemblage des datasets

bind_rows(X2015, X2016, X2017, X2018, X2019, X2020, X2021)

```

## Moyenne du score de bonheur en fonction de la région

```{r graphe 1 & 2}

# Nombre de pays par région dans le jeu de données
bar <- ggplot(X2015, aes(x = Region)) + geom_bar()
bar + theme(axis.text.x = element_text(angle = 90))

# Les régions et leur score de bonheur (box plot)
regions <- X2015 %>% select("Region", "Happiness Score")

regions <- rename(regions, "Happiness_score"="Happiness Score")

reg_point <- ggplot(regions, aes(x = Region, y = Happiness_score)) + geom_boxplot()
reg_point + theme(axis.text.x = element_text(angle = 90))

```
